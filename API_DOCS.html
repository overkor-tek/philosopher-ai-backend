<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philosopher AI - API Documentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        .section {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #764ba2;
            margin-bottom: 15px;
            border-bottom: 2px solid #764ba2;
            padding-bottom: 10px;
        }
        .endpoint {
            background: #f8f9fa;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }
        .method {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 10px;
        }
        .get { background: #61affe; color: white; }
        .post { background: #49cc90; color: white; }
        .put { background: #fca130; color: white; }
        .patch { background: #50e3c2; color: white; }
        .delete { background: #f93e3e; color: white; }
        .path {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #333;
        }
        .description {
            margin-top: 10px;
            color: #666;
        }
        .auth-required {
            display: inline-block;
            background: #ffeaa7;
            color: #d63031;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .admin-required {
            display: inline-block;
            background: #ff7675;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 5px;
        }
        code {
            background: #f1f3f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .server-info {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§  Philosopher AI - API Documentation</h1>
            <p class="subtitle">Complete API reference for production backend</p>
            <p style="margin-top: 10px; color: #888;">Version 1.0.0 | Generated by C1 Mechanic</p>
        </header>

        <div class="stats">
            <div class="stat-box">
                <div class="stat-number">28</div>
                <div class="stat-label">New Endpoints</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">6</div>
                <div class="stat-label">Feature Sets</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">100%</div>
                <div class="stat-label">Production Ready</div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“¡ Server Information</h2>
            <div class="server-info">
                <strong>Production:</strong> <code>https://cloud-funnel-production.up.railway.app/api/v1</code><br>
                <strong>Development:</strong> <code>http://localhost:3001/api/v1</code>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ” Authentication Endpoints</h2>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/register</span>
                <div class="description">
                    Register a new user account. Returns JWT token on success.
                    <br><strong>Body:</strong> <code>{ email, password, username? }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/login</span>
                <div class="description">
                    Login with email and password. Returns JWT token.
                    <br><strong>Body:</strong> <code>{ email, password }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/auth/me</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Get current authenticated user information.
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”‘ Password Reset Endpoints</h2>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/forgot-password</span>
                <div class="description">
                    Request password reset email. Always returns success to prevent email enumeration.
                    <br><strong>Body:</strong> <code>{ email }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/auth/verify-reset-token/:token</span>
                <div class="description">
                    Verify if password reset token is valid.
                </div>
            </div>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/reset-password</span>
                <div class="description">
                    Complete password reset with token from email.
                    <br><strong>Body:</strong> <code>{ token, newPassword }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/send-verification-email</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Send email verification link to user's email.
                </div>
            </div>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/verify-email</span>
                <div class="description">
                    Verify email address with token from email.
                    <br><strong>Body:</strong> <code>{ token }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/auth/change-password</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Change password for authenticated user.
                    <br><strong>Body:</strong> <code>{ currentPassword, newPassword }</code>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ‘¤ Profile Management Endpoints</h2>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/profile/me</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Get own profile with usage statistics.
                </div>
            </div>

            <div class="endpoint">
                <span class="method put">PUT</span>
                <span class="path">/profile/me</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Update profile information.
                    <br><strong>Body:</strong> <code>{ username?, displayName?, bio?, avatarUrl?, preferences? }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method delete">DELETE</span>
                <span class="path">/profile/me</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Delete account (soft delete). Requires password confirmation.
                    <br><strong>Body:</strong> <code>{ confirmPassword }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/profile/user/:username</span>
                <div class="description">
                    Get public profile by username.
                </div>
            </div>

            <div class="endpoint">
                <span class="method patch">PATCH</span>
                <span class="path">/profile/me/preferences</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Update user preferences (merges with existing).
                    <br><strong>Body:</strong> <code>{ preferences: { ...} }</code>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ‘¨â€ğŸ’¼ Admin Dashboard Endpoints</h2>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/admin/dashboard</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <span class="admin-required">ğŸ‘‘ Admin Only</span>
                <div class="description">
                    Get dashboard overview with key metrics (users, usage, revenue).
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/admin/users</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <span class="admin-required">ğŸ‘‘ Admin Only</span>
                <div class="description">
                    List all users with pagination and search.
                    <br><strong>Query Params:</strong> <code>page, limit, search, tier</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/admin/users/:userId</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <span class="admin-required">ğŸ‘‘ Admin Only</span>
                <div class="description">
                    Get detailed user information with usage stats.
                </div>
            </div>

            <div class="endpoint">
                <span class="method patch">PATCH</span>
                <span class="path">/admin/users/:userId/tier</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <span class="admin-required">ğŸ‘‘ Admin Only</span>
                <div class="description">
                    Update user tier (free/pro/enterprise).
                    <br><strong>Body:</strong> <code>{ tier }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/admin/system/health</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <span class="admin-required">ğŸ‘‘ Admin Only</span>
                <div class="description">
                    Get system health metrics (database, memory, uptime).
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š Analytics Endpoints</h2>

            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/analytics/track</span>
                <div class="description">
                    Track custom event (can be called anonymously or authenticated).
                    <br><strong>Body:</strong> <code>{ event, properties? }</code>
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/analytics/me/metrics</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Get personal usage metrics and history.
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/analytics/platform</span>
                <div class="description">
                    Get public platform-wide metrics.
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/analytics/growth</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Get growth metrics (last 30 days).
                </div>
            </div>

            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/analytics/engagement</span>
                <span class="auth-required">ğŸ”’ Auth Required</span>
                <div class="description">
                    Get engagement metrics (average usage, active users).
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”§ Additional Information</h2>
            <h3 style="margin-top: 20px;">Authentication</h3>
            <p>Most endpoints require authentication via JWT token in the Authorization header:</p>
            <code>Authorization: Bearer YOUR_JWT_TOKEN</code>

            <h3 style="margin-top: 20px;">Rate Limiting</h3>
            <p>â€¢ Global: 100 requests per 15 minutes</p>
            <p>â€¢ Questions: 10 questions per minute</p>

            <h3 style="margin-top: 20px;">Response Format</h3>
            <p>All responses are in JSON format with consistent structure:</p>
            <code>{ success: true, data: {...} }</code> or <code>{ error: "message" }</code>

            <h3 style="margin-top: 20px;">Database Migrations Required</h3>
            <p>To use new endpoints, run migrations:</p>
            <code>psql $DATABASE_URL -f migrations/003_auth_extensions.sql</code><br>
            <code>psql $DATABASE_URL -f migrations/004_admin_field.sql</code>
        </div>

        <footer style="text-align: center; padding: 30px; color: white;">
            <p>ğŸ”º Generated by C1 Mechanic - Autonomous Production Mode</p>
            <p style="opacity: 0.8; margin-top: 10px;">For interactive Swagger UI, install swagger-ui-express</p>
        </footer>
    </div>
</body>
</html>
